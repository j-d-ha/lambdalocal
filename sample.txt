~/Repos/Go/go-lambda-hello-world
sam local invoke --event "./events/event.json"
No current session found, using default AWS::AccountId
Invoking bootstrap (provided.al2)
Local image is up-to-date
Using local image: public.ecr.aws/lambda/provided:al2-rapid-x86_64.

Mounting /Users/jonasha/Repos/Go/go-lambda-hello-world/.aws-sam/build/HelloWorldFunction as /var/task:ro,delegated, inside runtime container
START RequestId: 2acc092d-cae1-4b7a-bd3e-d0154f02959e Version: $LATEST
06 Aug 2024 01:07:07,452 [ERROR] (rapid) Init failed error=fork/exec /var/task/bootstrap: invalid argument InvokeID=
06 Aug 2024 01:07:07,469 [ERROR] (rapid) Invoke failed InvokeID=92ea899c-5b62-48ae-84ea-849432b9a00b error=fork/exec /var/task/bootstrap: invalid argument
06 Aug 2024 01:07:07,471 [ERROR] (rapid) Invoke DONE failed: Runtime.InvalidEntrypoint

~/Repos/Go/go-lambda-hello-world
sam local invoke --event "./events/event.json"
No current session found, using default AWS::AccountId
Invoking bootstrap (provided.al2)
Local image is up-to-date
Using local image: public.ecr.aws/lambda/provided:al2-rapid-x86_64.

Mounting /Users/jonasha/Repos/Go/go-lambda-hello-world/.aws-sam/build/HelloWorldFunction as /var/task:ro,delegated, inside runtime container
START RequestId: c9f290bd-e26f-40c4-b1ce-d78c93f4e7cb Version: $LATEST
06 Aug 2024 01:07:22,344 [ERROR] (rapid) Init failed error=fork/exec /var/task/bootstrap: invalid argument InvokeID=
06 Aug 2024 01:07:22,352 [ERROR] (rapid) Invoke failed error=fork/exec /var/task/bootstrap: invalid argument InvokeID=5ff6a008-e443-4c09-b148-3b181e1dacd2
06 Aug 2024 01:07:22,356 [ERROR] (rapid) Invoke DONE failed: Runtime.InvalidEntrypoint

~/Repos/Go/go-lambda-hello-world
echo $DOCKER_HOST

~/Repos/Go/go-lambda-hello-world
echo $DOCKER_HOST

~/Repos/Go/go-lambda-hello-world
sam local invoke --event "./events/event.json"
No current session found, using default AWS::AccountId
Invoking bootstrap (provided.al2)
Local image is up-to-date
Using local image: public.ecr.aws/lambda/provided:al2-rapid-x86_64.

Mounting /Users/jonasha/Repos/Go/go-lambda-hello-world/.aws-sam/build/HelloWorldFunction as /var/task:ro,delegated, inside runtime container
START RequestId: ec3fe63d-04a1-4016-9a11-f2c6767d2cd1 Version: $LATEST
06 Aug 2024 01:08:04,331 [ERROR] (rapid) Init failed error=fork/exec /var/task/bootstrap: invalid argument InvokeID=
06 Aug 2024 01:08:04,338 [ERROR] (rapid) Invoke failed InvokeID=5de8b3d2-b479-4718-818f-301b5427403e error=fork/exec /var/task/bootstrap: invalid argument
06 Aug 2024 01:08:04,342 [ERROR] (rapid) Invoke DONE failed: Runtime.InvalidEntrypoint

~/Repos/Go/go-lambda-hello-world
sam local invoke --event "./events/event.json"
No current session found, using default AWS::AccountId
Invoking bootstrap (provided.al2)
Local image is up-to-date
Using local image: public.ecr.aws/lambda/provided:al2-rapid-x86_64.

Mounting /Users/jonasha/Repos/Go/go-lambda-hello-world/.aws-sam/build/HelloWorldFunction as /var/task:ro,delegated, inside runtime container
START RequestId: 450a70a6-658b-4dc7-8ff9-fafe68e344b0 Version: $LATEST
06 Aug 2024 01:08:20,662 [ERROR] (rapid) Init failed error=fork/exec /var/task/bootstrap: invalid argument InvokeID=
06 Aug 2024 01:08:20,669 [ERROR] (rapid) Invoke failed error=fork/exec /var/task/bootstrap: invalid argument InvokeID=aa1d8abc-2376-4107-9a2c-a380ec33b50a
06 Aug 2024 01:08:20,693 [ERROR] (rapid) Invoke DONE failed: Runtime.InvalidEntrypoint

~/Repos/Go/go-lambda-hello-world
sam local invoke --event "./events/event.json"
No current session found, using default AWS::AccountId
Error: Running AWS SAM projects locally requires Docker. Have you got it installed and running?
~/Repos/Go/go-lambda-hello-world
docker ps
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
~/Repos/Go/go-lambda-hello-world
docker context ls
NAME            DESCRIPTION                               DOCKER ENDPOINT                                     ERROR
colima          colima                                    unix:///Users/jonasha/.colima/default/docker.sock
default *       Current DOCKER_HOST based configuration   unix:///var/run/docker.sock
desktop-linux   Docker Desktop                            unix:///Users/jonasha/.docker/run/docker.sock
~/Repos/Go/go-lambda-hello-world
sam local invoke --event "./events/event.json"
No current session found, using default AWS::AccountId
Invoking bootstrap (provided.al2)
Local image is up-to-date
Using local image: public.ecr.aws/lambda/provided:al2-rapid-x86_64.

Mounting /Users/jonasha/Repos/Go/go-lambda-hello-world/.aws-sam/build/HelloWorldFunction as /var/task:ro,delegated, inside runtime container
START RequestId: acafeef8-ff91-4ab7-bbfa-abd0f4dec04b Version: $LATEST
06 Aug 2024 01:13:18,608 [ERROR] (rapid) Init failed error=fork/exec /var/task/bootstrap: invalid argument InvokeID=
06 Aug 2024 01:13:18,617 [ERROR] (rapid) Invoke failed error=fork/exec /var/task/bootstrap: invalid argument InvokeID=f6a1c911-52ee-4ba6-980a-3a2f65a70d37
06 Aug 2024 01:13:18,621 [ERROR] (rapid) Invoke DONE failed: Runtime.InvalidEntrypoint

~/Repos/Go/go-lambda-hello-world
colima stop
INFO[0000] stopping colima
INFO[0000] stopping ...                                  context=docker
INFO[0000] stopping ...                                  context=vm
INFO[0002] done




~/Repos/Go/go-lambda-hello-world
cd ./hello-world/
~/Repos/Go/go-lambda-hello-world/hello-world
OOS=linux go build -o bootstrap
~/Repos/Go/go-lambda-hello-world/hello-world
GOOS=linux go build -o bootstrap
~/Repos/Go/go-lambda-hello-world/hello-world
sam local invoke --event "./events/event.json"
Error: [Errno 2] No such file or directory: './events/event.json'
~/Repos/Go/go-lambda-hello-world/hello-world
sam local invoke --event "./events/event.json"
Error: [Errno 2] No such file or directory: './events/event.json'
~/Repos/Go/go-lambda-hello-world/hello-world
cd ..
~/Repos/Go/go-lambda-hello-world
sam local invoke --event "./events/event.json"
No current session found, using default AWS::AccountId
Invoking bootstrap (provided.al2)
Local image is up-to-date
Using local image: public.ecr.aws/lambda/provided:al2-rapid-x86_64.

Mounting /Users/jonasha/Repos/Go/go-lambda-hello-world/.aws-sam/build/HelloWorldFunction as /var/task:ro,delegated, inside runtime container
START RequestId: 741e7d8d-a9f4-4cf1-9a86-00100bac8e13 Version: $LATEST
06 Aug 2024 01:20:25,469 [ERROR] (rapid) Init failed error=fork/exec /var/task/bootstrap: invalid argument InvokeID=
06 Aug 2024 01:20:25,475 [ERROR] (rapid) Invoke failed error=fork/exec /var/task/bootstrap: invalid argument InvokeID=298702ce-e2a3-43c3-b4c9-0d7991196131
06 Aug 2024 01:20:25,478 [ERROR] (rapid) Invoke DONE failed: Runtime.InvalidEntrypoint

~/Repos/Go/go-lambda-hello-world
SAM_BUILD_MODE=debug sam build --no-cached
Building codeuri: /Users/jonasha/Repos/Go/go-lambda-hello-world/hello-world runtime: provided.al metadata: {'BuildMethod': 'go1.x'} architecture: x86_64 functions:
HelloWorldFunction

Build Failed
Error: 'provided.al' runtime is not supported
~/Repos/Go/go-lambda-hello-world
SAM_BUILD_MODE=debug sam build --no-cached
Building codeuri: /Users/jonasha/Repos/Go/go-lambda-hello-world/hello-world runtime: provided.al2023 metadata: {'BuildMethod': 'go1.x'} architecture: x86_64 functions:
HelloWorldFunction
Workflow GoModulesBuilder does not support value "False" for building in source. Using default value "True".
 Running GoModulesBuilder:Build

Build Succeeded

Built Artifacts  : .aws-sam/build
Built Template   : .aws-sam/build/template.yaml

Commands you can use next
=========================
[*] Validate SAM template: sam validate
[*] Invoke Function: sam local invoke
[*] Test Function in the Cloud: sam sync --stack-name {{stack-name}} --watch
[*] Deploy: sam deploy --guided
~/Repos/Go/go-lambda-hello-world
sam local invoke --event "./events/event.json"
No current session found, using default AWS::AccountId
Invoking bootstrap (provided.al2023)
Local image is up-to-date
Using local image: public.ecr.aws/lambda/provided:al2023-rapid-x86_64.

Mounting /Users/jonasha/Repos/Go/go-lambda-hello-world/.aws-sam/build/HelloWorldFunction as /var/task:ro,delegated, inside runtime container
START RequestId: d1d7cb28-b311-4653-8d1a-f4ae2b944aa2 Version: $LATEST
06 Aug 2024 01:23:45,643 [ERROR] (rapid) Init failed error=fork/exec /var/task/bootstrap: invalid argument InvokeID=
06 Aug 2024 01:23:45,649 [ERROR] (rapid) Invoke failed error=fork/exec /var/task/bootstrap: invalid argument InvokeID=9a625867-b208-45ba-9fb5-24971124016e
06 Aug 2024 01:23:45,668 [ERROR] (rapid) Invoke DONE failed: Runtime.InvalidEntrypoint

~/Repos/Go/go-lambda-hello-world
SAM_BUILD_MODE=debug sam build --no-cached
Building codeuri: /Users/jonasha/Repos/Go/go-lambda-hello-world/hello-world runtime: provided.al2023 metadata: {'BuildMethod': 'go1.x'} architecture: arm64 functions:
HelloWorldFunction
Workflow GoModulesBuilder does not support value "False" for building in source. Using default value "True".
 Running GoModulesBuilder:Build

Build Succeeded

Built Artifacts  : .aws-sam/build
Built Template   : .aws-sam/build/template.yaml

Commands you can use next
=========================
[*] Validate SAM template: sam validate
[*] Invoke Function: sam local invoke
[*] Test Function in the Cloud: sam sync --stack-name {{stack-name}} --watch
[*] Deploy: sam deploy --guided
~/Repos/Go/go-lambda-hello-world
sam local invoke --event "./events/event.json"
No current session found, using default AWS::AccountId
Invoking bootstrap (provided.al2023)
Local image was not found.
Removing rapid images for repo public.ecr.aws/sam/emulation-provided.al2023
Building image......................................................................
Using local image: public.ecr.aws/lambda/provided:al2023-rapid-arm64.

Mounting /Users/jonasha/Repos/Go/go-lambda-hello-world/.aws-sam/build/HelloWorldFunction as /var/task:ro,delegated, inside runtime container
START RequestId: 4570e07f-522f-420e-a9a5-14047019454d Version: $LATEST
06 Aug 2024 01:25:16,508 [ERROR] (rapid) Init failed error=fork/exec /var/task/bootstrap: invalid argument InvokeID=
06 Aug 2024 01:25:16,509 [ERROR] (rapid) Invoke failed InvokeID=421a4aea-da70-4f7c-91a4-5035d16c0b52 error=fork/exec /var/task/bootstrap: invalid argument
06 Aug 2024 01:25:16,509 [ERROR] (rapid) Invoke DONE failed: Runtime.InvalidEntrypoint

~/Repos/Go/go-lambda-hello-world
source ~/.zshrc
~/Repos/Go/go-lambda-hello-world
colima start
INFO[0000] starting colima
INFO[0000] runtime: docker
INFO[0001] starting ...                                  context=vm
INFO[0012] provisioning ...                              context=docker
INFO[0012] starting ...                                  context=docker
INFO[0013] done


~/Repos/Go/go-lambda-hello-world
sam local run-api
Usage: sam local [OPTIONS] COMMAND [ARGS]...
Try 'sam local -h' for help.

Error: No such command 'run-api'.
~/Repos/Go/go-lambda-hello-world
sam local run_api
Usage: sam local [OPTIONS] COMMAND [ARGS]...
Try 'sam local -h' for help.

Error: No such command 'run_api'.
~/Repos/Go/go-lambda-hello-world
sam local start-api
No current session found, using default AWS::AccountId
Initializing the lambda functions containers.
Local image was not found.
Removing rapid images for repo public.ecr.aws/sam/emulation-provided.al2023
Building image...............................................................
Using local image: public.ecr.aws/lambda/provided:al2023-rapid-arm64.

Mounting /Users/jonasha/Repos/Go/go-lambda-hello-world/.aws-sam/build/HelloWorldFunction as /var/task:ro,delegated, inside runtime container
Containers Initialization is done.
Mounting HelloWorldFunction at http://127.0.0.1:3000/hello [GET]
You can now browse to the above endpoints to invoke your functions. You do not need to restart/reload SAM CLI while working on your functions, changes will be reflected
instantly/automatically. If you used sam build before running local commands, you will need to re-run sam build for the changes to be picked up. You only need to restart SAM CLI
if you update your AWS SAM template
2024-08-05 21:31:57 WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
 * Running on http://127.0.0.1:3000
2024-08-05 21:31:57 Press CTRL+C to quit
Invoking bootstrap (provided.al2023)
Reuse the created warm container for Lambda function 'HelloWorldFunction'
Lambda function 'HelloWorldFunction' is already running
START RequestId: 4118926a-b0f5-4266-aa15-8cf6ed0eb385 Version: $LATEST
2024/08/06 01:32:38 INFO Running maim
{
    "resource": "/hello",
    "path": "/hello",
    "httpMethod": "GET",
    "headers": {
        "Accept": "*/*",
        "Host": "127.0.0.1:3000",
        "User-Agent": "curl/8.4.0",
        "X-Forwarded-Port": "3000",
        "X-Forwarded-Proto": "http"
    },
    "multiValueHeaders": {
        "Accept": [
            "*/*"
        ],
        "Host": [
            "127.0.0.1:3000"
        ],
        "User-Agent": [
            "curl/8.4.0"
        ],
        "X-Forwarded-Port": [
            "3000"
        ],
        "X-Forwarded-Proto": [
            "http"
        ]
    },
    "queryStringParameters": null,
    "multiValueQueryStringParameters": null,
    "pathParameters": null,
    "stageVariables": null,
    "requestContext": {
        "accountId": "123456789012",
        "resourceId": "123456",
        "stage": "Prod",
        "domainName": "127.0.0.1:3000",
        "domainPrefix": "",
        "requestId": "67baee3a-91c8-441d-856e-b2783f74f600",
        "extendedRequestId": "",
        "protocol": "HTTP/1.1",
        "identity": {
            "cognitoIdentityPoolId": "",
            "accountId": "",
            "cognitoIdentityId": "",
            "caller": "",
            "apiKey": "",
            "apiKeyId": "",
            "accessKey": "",
            "sourceIp": "127.0.0.1",
            "cognitoAuthenticationType": "",
            "cognitoAuthenticationProvider": "",
            "userArn": "",
            "userAgent": "Custom User Agent String",
            "user": ""
        },
        "resourcePath": "/hello",
        "path": "/hello",
        "authorizer": null,
        "httpMethod": "GET",
        "requestTime": "06/Aug/2024:01:31:50 +0000",
        "requestTimeEpoch": 1722907910,
        "apiId": "1234567890"
    },
    "body": ""
}
2024/08/06 01:32:38 INFO Running handler
END RequestId: 7b4ce418-f995-4401-b4de-26c6e15e3a1b
REPORT RequestId: 7b4ce418-f995-4401-b4de-26c6e15e3a1b  Init Duration: 0.04 ms  Duration: 65.90 ms      Billed Duration: 66 ms  Memory Size: 128 MB     Max Memory Used: 128 MB

2024-08-05 21:32:38 127.0.0.1 - - [05/Aug/2024 21:32:38] "GET /hello HTTP/1.1" 200 -
Invoking bootstrap (provided.al2023)
Reuse the created warm container for Lambda function 'HelloWorldFunction'
Lambda function 'HelloWorldFunction' is already running
START RequestId: afd30092-7224-4a0a-8b95-9db816aee02c Version: $LATEST
{
    "resource": "/hello",
    "path": "/hello",
    "httpMethod": "GET",
    "headers": {
        "Accept": "*/*",
        "Host": "127.0.0.1:3000",
        "User-Agent": "curl/8.4.0",
        "X-Forwarded-Port": "3000",
        "X-Forwarded-Proto": "http",
        "X-My-Header": "value1,value2,value3"
    },
    "multiValueHeaders": {
        "Accept": [
            "*/*"
        ],
        "Host": [
            "127.0.0.1:3000"
        ],
        "User-Agent": [
            "curl/8.4.0"
        ],
        "X-Forwarded-Port": [
            "3000"
        ],
        "X-Forwarded-Proto": [
            "http"
        ],
        "X-My-Header": [
            "value1,value2,value3"
        ]
    },
    "queryStringParameters": null,
    "multiValueQueryStringParameters": null,
    "pathParameters": null,
    "stageVariables": null,
    "requestContext": {
        "accountId": "123456789012",
        "resourceId": "123456",
        "stage": "Prod",
        "domainName": "127.0.0.1:3000",
        "domainPrefix": "",
        "requestId": "67baee3a-91c8-441d-856e-b2783f74f600",
        "extendedRequestId": "",
        "protocol": "HTTP/1.1",
        "identity": {
            "cognitoIdentityPoolId": "",
            "accountId": "",
            "cognitoIdentityId": "",
            "caller": "",
            "apiKey": "",
            "apiKeyId": "",
            "accessKey": "",
            "sourceIp": "127.0.0.1",
            "cognitoAuthenticationType": "",
            "cognitoAuthenticationProvider": "",
            "userArn": "",
            "userAgent": "Custom User Agent String",
            "user": ""
        },
        "resourcePath": "/hello",
        "path": "/hello",
        "authorizer": null,
        "httpMethod": "GET",
        "requestTime": "06/Aug/2024:01:31:50 +0000",
        "requestTimeEpoch": 1722907910,
        "apiId": "1234567890"
    },
    "body": ""
}
2024/08/06 01:33:07 INFO Running handler
END RequestId: 3eb0d855-a77f-44c4-af86-edfcb2f39ded
REPORT RequestId: 3eb0d855-a77f-44c4-af86-edfcb2f39ded  Duration: 1.27 ms       Billed Duration: 2 ms   Memory Size: 128 MB     Max Memory Used: 128 MB

2024-08-05 21:33:07 127.0.0.1 - - [05/Aug/2024 21:33:07] "GET /hello HTTP/1.1" 200 -
Invoking bootstrap (provided.al2023)
Reuse the created warm container for Lambda function 'HelloWorldFunction'
Lambda function 'HelloWorldFunction' is already running
START RequestId: c2655c25-9cb7-4fc9-aa58-bc9d05db027f Version: $LATEST
{
    "resource": "/hello",
    "path": "/hello",
    "httpMethod": "GET",
    "headers": {
        "Accept": "*/*",
        "Accept-Encoding": "br, deflate, gzip, x-gzip",
        "Content-Disposition": "form-data; name=\"element-name\"",
        "Content-Length": "0",
        "Content-Type": "text/Not",
        "Cookie": "last_searched_location=IJburg; theme=darcula",
        "Host": "127.0.0.1:3000",
        "Plain": "",
        "User-Agent": "IntelliJ HTTP Client/GoLand 2024.1.4",
        "X-Forwarded-Port": "3000",
        "X-Forwarded-Proto": "http"
    },
    "multiValueHeaders": {
        "Accept": [
            "*/*"
        ],
        "Accept-Encoding": [
            "br, deflate, gzip, x-gzip"
        ],
        "Content-Disposition": [
            "form-data; name=\"element-name\""
        ],
        "Content-Length": [
            "0"
        ],
        "Content-Type": [
            "text/Not"
        ],
        "Cookie": [
            "last_searched_location=IJburg; theme=darcula"
        ],
        "Host": [
            "127.0.0.1:3000"
        ],
        "Plain": [
            ""
        ],
        "User-Agent": [
            "IntelliJ HTTP Client/GoLand 2024.1.4"
        ],
        "X-Forwarded-Port": [
            "3000"
        ],
        "X-Forwarded-Proto": [
            "http"
        ]
    },
    "queryStringParameters": {
        "name": "test2",
        "var": "test3"
    },
    "multiValueQueryStringParameters": {
        "name": [
            "test1",
            "test2"
        ],
        "var": [
            "test3"
        ]
    },
    "pathParameters": null,
    "stageVariables": null,
    "requestContext": {
        "accountId": "123456789012",
        "resourceId": "123456",
        "stage": "Prod",
        "domainName": "127.0.0.1:3000",
        "domainPrefix": "",
        "requestId": "67baee3a-91c8-441d-856e-b2783f74f600",
        "extendedRequestId": "",
        "protocol": "HTTP/1.1",
        "identity": {
            "cognitoIdentityPoolId": "",
            "accountId": "",
            "cognitoIdentityId": "",
            "caller": "",
            "apiKey": "",
            "apiKeyId": "",
            "accessKey": "",
            "sourceIp": "127.0.0.1",
            "cognitoAuthenticationType": "",
            "cognitoAuthenticationProvider": "",
            "userArn": "",
            "userAgent": "Custom User Agent String",
            "user": ""
        },
        "resourcePath": "/hello",
        "path": "/hello",
        "authorizer": null,
        "httpMethod": "GET",
        "requestTime": "06/Aug/2024:01:31:50 +0000",
        "requestTimeEpoch": 1722907910,
        "apiId": "1234567890"
    },
    "body": ""
}
2024/08/06 01:33:45 INFO Running handler
END RequestId: 383155c2-752b-431d-8276-4373c7363e5e
REPORT RequestId: 383155c2-752b-431d-8276-4373c7363e5e  Duration: 0.89 ms       Billed Duration: 1 ms   Memory Size: 128 MB     Max Memory Used: 128 MB

2024-08-05 21:33:45 127.0.0.1 - - [05/Aug/2024 21:33:45] "GET /hello?name=test1&name=test2&var=test3 HTTP/1.1" 200 -
^C
Commands you can use next
=========================
[*] Validate SAM template: sam validate
[*] Test Function in the Cloud: sam sync --stack-name {{stack-name}} --watch
[*] Deploy: sam deploy --guided
